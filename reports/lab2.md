## 编程作业

1. 实现了`sys_get_time`和`sys_task_info`。通过模拟MMU的翻译过程获得对应物理页面的物理地址，然后内核代码可以直接进行操作。
2. 实现了`sys_map`和`sys_unmap`，`sys_map`的想法是通过检查后，调用当前`task`的 `MemorySet.insert_framed_area` 直接进行新的`MapArea`的插入。 而`sys_unmap`是通过遍历寻找到目标MapArea，利用自带`map()`和 `remove`进行删除。

## 问答题

1. 标志位用于判断页面的合法性， 以及对页面的访问进行控制。

2. 
    1. 没有创建对应的映射、访问异常的内存地址、页面换出会出现缺页异常。
    2. 发生缺页时重要的是`satp`寄存器，可以获得根页表的页号。
    3. 按需执行，提高系统的响应速度，存在批量的加载时可以提高效率。
    4. $10^7$
    5. 在页表项的属性位中添加`lazy`对应的标志位，缺失时通过该位的设置情况决定是否进行加载。
    6. 将有效位（V）置为 0，表示页面不在内存中; 清除A位和D位，因为页面已经不在内存中，所以也不会被访问或修改。

3. 
    1. 直接切换 `satp` 当中的根页表号即可。
    2. 使用`U`标志位进行限制
    3. 单页表：页表的资源开销更小，维护更简单，页面地址的切换次数会更少更快，`TLB`缓存失效的次数相对更低，提高访问性能
    4. 系统调用、trap发生或退出时产生特权级改变，进入内核页表；当进程切换时，切换页表。

## 荣誉准则

1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 **以下各位** 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

    > *无*

2. 此外，我也参考了 **以下资料** ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

    > [v3](https://rcore-os.cn/rCore-Tutorial-Book-v3)

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按 “-100” 分计。